<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>12.5.2 Acceleo 2 Queries</title><link type="text/css" rel="stylesheet" href="PLUGINS_ROOT/org.polarsys.capella.doc/html/styles.css"/></head><body><h1 id="Acceleo_2_queries_.5Bdeprecated.5D">Acceleo 2 queries [deprecated]</h1><h2 id="Basic_Model_Queries">Basic Model Queries</h2><table cellpadding="7"><tr><th><b>Description</b></th><th><b>Workbench Selection</b></th><th><b>Syntax</b></th></tr><tr><td>Current Element </td><td>Model Element</td><td>&lt;% current %&gt;</td></tr><tr><td>Container of current element</td><td>A model element </td><td>&lt;% current.<b>eContainer</b> %&gt;</td></tr><tr><td>Type of an element</td><td>A model element</td><td>&lt;% current.<b>eClass</b> %&gt;</td></tr><tr><td>Total number of elements in a model</td><td>A model element</td><td>&lt;% current.<b>ancestor.nLast.eAllContents.nSize</b> %&gt;</td></tr><tr><td>Total number of sub-elements</td><td>A model element</td><td>&lt;% current.<b>eAllContents.nSize</b> %&gt;</td></tr></table><p><br/></p><h2 id="Diagram_Queries">Diagram Queries</h2><table cellpadding="7"><tr><td><b>Description</b></td><td><b>Workbench Selection</b></td><td><b>Syntax</b></td></tr><tr><td>Semantic element associated to a graphical element</td><td>A diagram / A diagram element</td><td>&lt;% current.<b>target</b> %&gt;</td></tr><tr><td>aird file (non fragmented model)</td><td>A diagram</td><td>&lt;% ((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize()) %&gt;</td></tr><tr><td>All aird files (fragmented model)</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"]) %&gt;</td></tr><tr><td>All diagrams</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"])<b>.ownedViews.ownedRepresentationDescriptors</b> %&gt;</td></tr><tr><td>Number of diagrams</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"])<b>.ownedViews.ownedRepresentationDescriptors.nSize()</b> %&gt;</td></tr><tr><td>All diagrams from kind "Logical Data Flow"</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"])<b>.ownedViews.ownedRepresentationDescriptors[description.name.startsWith("Logical Data Flow Blank")]</b>%&gt;</td></tr><tr><td>All diagrams except kind "Scenario"</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"])<b>.ownedViews.ownedRepresentationDescriptors[description.name.endsWith("Scenario")==false]</b> %&gt;</td></tr><tr><td>List of different viewpoints</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"])<b>.ownedViews.viewpoint.nMinimize()</b> %&gt;</td></tr><tr><td>Number of graphical elements in all diagrams</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"])<b>.ownedViews.ownedRepresentationDescriptors.representation.diagramElements.nSize()</b> %&gt;</td></tr><tr><td>Number of graphical elements in all diagrams (including technical elements like style, colorâ€¦)</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"])<b>.ownedViews.ownedRepresentationDescriptors.representation.eAllContents.nSize()</b> %&gt;</td></tr></table><h2 id="Searching_Strings">Searching Strings</h2><table cellpadding="7"><tr><td><b>Description</b></td><td><b>Workbench Selection</b></td><td><b>Syntax</b></td></tr><tr><td>All element containing the "TODO" string in their 'Name' property</td><td>A model element</td><td>&lt;% current.eAllContents()<b>[name.matches(".*TODO.*")]</b> %&gt;</td></tr><tr><td>All element containing the "TODO" string in their 'Summary' property</td><td>A model element</td><td>&lt;% current.eAllContents()<b>[summary.matches(".*TODO.*")]</b> %&gt;</td></tr><tr><td>All element containing the "TODO" string in their 'Description' property</td><td>A model element</td><td>&lt;% current.eAllContents()<b>[description.matches(".*TODO.*")]</b> %&gt;</td></tr><tr><td>All diagrams containing a note containing the "TODO" string</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"]).ownedViews.ownedRepresentationDescriptors.<b>representation[~element.filter("notation.Diagram").eAllContents("notation.Node")[type=="Note" &amp;&amp; description.indexOf("TODO")&gt;=0]]</b> %&gt;</td></tr><tr><td>Number of diagrams containing a note containing the "TODO" string</td><td>A diagram</td><td>&lt;% (((current+current.~).ancestor[eClass.name=="DAnalysis"].nMinimize().put("aird") + (get("aird")+get("aird").~+get("aird").~.~+get("aird").~.~).put("airds") + get("airds")+get("airds").referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis+get("airds").referencedAnalysis.referencedAnalysis.referencedAnalysis).nMinimize()[eClass.name=="DAnalysis"]).ownedViews.ownedRepresentationDescriptors.<b>representation[~element.filter("notation.Diagram").eAllContents("notation.Node")[type=="Note" &amp;&amp; description.indexOf("TODO")&gt;=0]].nSize()</b> %&gt;</td></tr></table><h2 id="Requirements">Requirements</h2><table cellpadding="7"><tr><td><b>Description</b></td><td><b>Workbench Selection</b></td><td><b>Syntax</b></td></tr><tr><td>Query to retrieve the list of non-allocated requirements</td><td>Requirement Package</td><td>&lt;% current.<b>eAllContents[relatedCapellaElements==null]</b> %&gt;</td></tr></table><h2 id="Model_Navigation_Examples">Model Navigation Examples</h2><table cellpadding="7"><tr><td><b>Description</b></td><td><b>Workbench Selection</b></td><td><b>Syntax</b></td></tr><tr><td>List of functions allocated to a component</td><td>Any Component</td><td>&lt;% current.allocatedFunctions %&gt;</td></tr><tr><td>List of sub logical components</td><td>Any Logical Component</td><td>&lt;% current.subLogicalComponents %&gt;</td></tr><tr><td>List of all functions<p>- having more than 3 ports
- allocated to one given component
- Which name starts with "Store"</p></td><td>Any Component</td><td>&lt;% current.allocatedFunctions[name.startsWith("Store") &amp;&amp; eAllContents().filter("FunctionPort").nSize&gt;3] %&gt;</td></tr></table><h2 id="Metrics">Metrics</h2><table cellpadding="7"><tr><td><b>Description</b></td><td><b>Workbench Selection</b></td><td><b>Syntax</b></td></tr><tr><td>Number of XXXX owned by the selected element, where XXXX is the type of a model element (&lt;% current.eClass %&gt; )</td><td>A model element</td><td>&lt;% current.eAllContents("XXXX").nSize() %&gt;</td></tr><tr><td>Number of Operational Activities</td><td>OperationalAnalysis</td><td>&lt;% current.eAllContents("OperationalActivity").nSize() %&gt;</td></tr><tr><td>Number of Operational Interactions</td><td>OperationalAnalysis</td><td>&lt;% current.eAllContents("FunctionalExchange").nSize() %&gt;</td></tr><tr><td>Number of Exchange Items in OA</td><td>OperationalAnalysis</td><td>&lt;% current.eAllContents("AbstractExchangeItem").nSize() %&gt;</td></tr><tr><td>Number of Types (Classes, Datatypes) in OA</td><td>OperationalAnalysis</td><td>&lt;% current.eAllContents("DataType").nSize() %&gt;</td></tr><tr><td>Number of Classes in OA</td><td>OperationalAnalysis</td><td><p>&lt;% current.eAllContents("Class").nSize() %&gt;</p></td></tr><tr><td>Number of States or Modes in OA</td><td>OperationalAnalysis</td><td>&lt;% (current.eAllContents().filter("State") - current.eAllContents().filter("Mode")).nSize() %&gt;</td></tr><tr><td>Number of Operational Entities</td><td>OperationalAnalysis</td><td>&lt;% (current.eAllContents("Entity")-current.eAllContents("OperationalActor")).nSize() %&gt;</td></tr><tr><td>Number of Operational Actors</td><td>OperationalAnalysis</td><td>&lt;% current.eAllContents("OperationalActor").nSize() %&gt;</td></tr><tr><td>Number of Operational Roles</td><td>OperationalAnalysis</td><td>&lt;% current.eAllContents("Role").nSize() %&gt;</td></tr><tr><td>Number of Communication Means</td><td>OperationalAnalysis</td><td>&lt;% current.eAllContents("CommunicationMean").nSize() %&gt;</td></tr><tr><td>Number of System Functions</td><td>SystemAnalysis</td><td>&lt;% current.eAllContents("SystemFunction").nSize() %&gt;</td></tr><tr><td>Number of Functional Exchanges in SA</td><td>SystemAnalysis</td><td>&lt;% current.eAllContents("FunctionalExchange").nSize() %&gt;</td></tr><tr><td>Number of Function Ports in SA</td><td>SystemAnalysis</td><td>&lt;% current.eAllContents().filter("FunctionPort").nSize %&gt;</td></tr><tr><td>Number of System Actors</td><td>SystemAnalysis</td><td>&lt;% current.eAllContents("Actor").nSize() %&gt;</td></tr><tr><td>Number of Functional Chains in SA</td><td>SystemAnalysis</td><td>&lt;% current.eAllContents("FunctionalChain").nSize() %&gt;</td></tr><tr><td>Number of Scenarios in SA</td><td>SystemAnalysis</td><td>&lt;% current.eAllContents("Scenario").nSize() %&gt;</td></tr><tr><td>Number of Behaviour Components in PA</td><td>PhysicalArchitecture</td><td>&lt;% current.eAllContents("PhysicalComponent")[nature=="BEHAVIOR"].nSize %&gt;</td></tr><tr><td>Number of Implementation PC (nodes) in PA</td><td>PhysicalArchitecture</td><td>&lt;% current.eAllContents("PhysicalComponent")[nature=="NODE"].nSize %&gt;</td></tr><tr><td>Number of Physical Links</td><td>PhysicalArchitecture</td><td>&lt;% current.eAllContents("PhysicalLink").nSize() %&gt;</td></tr><tr><td>Number of Physical Ports</td><td>PhysicalArchitecture</td><td>&lt;% current.eAllContents("PhysicalPort").nSize() %&gt;</td></tr></table><h2 id="Advanced_Queries">Advanced Queries</h2><p>With Acceleo, you can navigate in elements following references and attributes:
&lt;%current.outgoing%&gt; on a SystemFunction will retrieve outgoing functional exchanges:<br/><br/>
<img height="150" width="500" border="0" src="Images/12_5_ Acceleo Queries_html_51a25b.png"/><br/>
<br/>
There is many way to retrieve which references to use for an element. These references ca be used in a request like the above outgoing reference.
For instance, you can retrieve references with Acceleo using the following request:
&lt;%current.eClass.eAllReferences%&gt; (or current.eClass.eAllAttributes to retrieve attributes)
<br/><br/>
<img height="300" width="550" border="0" src="Images/12_5_ Acceleo Queries_html_m4a26b2e2.png"/><br/>
<br/>
One easiest way to retrieve references or attributes is to open the Properties View and go the Expert tab then choose relevant references/attributes for your query
<br/><br/>
<img height="250" width="800" border="0" src="Images/12_5_ Acceleo Queries_html_m44230212.png"/><br/><br/>
You just have to write the reference name in a camelCaseFormat to use it with Acceleo (e.g. Available In States =&gt; availableInStates)</p></body></html>